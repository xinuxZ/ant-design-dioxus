# QRCode 二维码组件

## 功能清单

### 二维码生成与显示功能实现分析

#### 官方实现分析
- **核心逻辑**：将文本转换为二维码，支持自定义颜色和Logo
- **关键技术点**：
  - 支持Canvas和SVG两种渲染方式
  - 支持自定义二维码大小、颜色、边距
  - 支持嵌入图标/Logo
  - 支持不同的纠错级别（L、M、Q、H）
  - 支持不同状态（active、expired、loading、scanned）
  - 支持自定义状态渲染
- **API 设计**：
  - `value`: 要转换成二维码的文本
  - `type`: 渲染类型，可选 'canvas' 或 'svg'
  - `icon`: 嵌入的图标地址
  - `size`: 二维码大小
  - `iconSize`: 图标大小
  - `color`: 二维码颜色
  - `bgColor`: 二维码背景色
  - `bordered`: 是否有边框
  - `errorLevel`: 纠错级别，可选 'L'、'M'、'Q'、'H'
  - `status`: 二维码状态，可选 'active'、'expired'、'loading'、'scanned'
  - `statusRender`: 自定义状态渲染函数
  - `onRefresh`: 刷新回调

#### Rust + Dioxus 实现方案
- **类型设计**：
  - `QRCodeProps`: 组件属性结构体
  - `QRCodeType`: 渲染类型枚举（Canvas/SVG）
  - `QRCodeErrorLevel`: 纠错级别枚举
  - `QRCodeStatus`: 状态枚举
  - `QRCodeIconSettings`: 图标设置结构体
- **状态管理**：
  - 使用`use_signal`管理二维码状态
  - 处理加载、过期、扫描等状态变化
- **事件处理**：
  - 实现刷新回调
  - 处理图标加载事件
- **样式实现**：
  - 使用CSS-in-Rust实现基础样式
  - 实现不同状态下的样式变化
  - 支持自定义颜色和大小

#### 实现计划
1. [ ] 类型定义：定义QRCode组件所需的所有类型
2. [ ] 核心逻辑实现：实现二维码生成和渲染逻辑
3. [ ] 样式集成：实现组件样式
4. [ ] 状态管理：实现不同状态的显示和切换
5. [ ] 图标集成：实现图标嵌入功能
6. [ ] 事件处理：实现刷新回调等事件
7. [ ] 测试编写：编写单元测试和集成测试
8. [ ] 文档更新：更新组件文档

### 二维码下载功能实现分析

#### 官方实现分析
- **核心逻辑**：支持将生成的二维码下载为图片
- **关键技术点**：
  - 将Canvas或SVG转换为图片数据
  - 创建下载链接
- **API 设计**：
  - 通过ref获取组件实例，调用下载方法

#### Rust + Dioxus 实现方案
- **类型设计**：
  - 添加下载相关的方法
- **状态管理**：
  - 管理下载状态
- **事件处理**：
  - 处理下载按钮点击事件
- **样式实现**：
  - 下载按钮样式

#### 实现计划
1. [ ] 实现下载功能
2. [ ] 添加下载示例
3. [ ] 测试下载功能

### 二维码状态管理功能实现分析

#### 官方实现分析
- **核心逻辑**：支持不同状态的二维码显示（活跃、过期、加载中、已扫描）
- **关键技术点**：
  - 状态切换逻辑
  - 不同状态下的视觉展示
- **API 设计**：
  - `status`属性控制状态
  - `statusRender`自定义状态渲染

#### Rust + Dioxus 实现方案
- **类型设计**：
  - `QRCodeStatus`枚举
  - `StatusRenderInfo`结构体
- **状态管理**：
  - 使用`use_signal`管理状态
- **事件处理**：
  - 状态变化时的回调
- **样式实现**：
  - 不同状态下的样式

#### 实现计划
1. [ ] 实现状态管理逻辑
2. [ ] 实现默认状态渲染
3. [ ] 实现自定义状态渲染
4. [ ] 测试状态切换
